<%- include('./includes/head.ejs') %>

    <style>
        .error-message {
            color: red;
            font-size: 12px;
            display: block;
        }

        label.error {
            color: red;
            font-weight: 400 !important;
            font-style: italic;
            font-size: 14px;
        }
    </style>

    <body>
        <div class="wrapper">
            <!-- Navbar -->
            <%- include('./includes/navbar.ejs') %>
                <!-- /.navbar -->

                <!--  Sidebar Container AdminLTE -->
                <%- include('./includes/sidebar.ejs') %>
                    <!--  /.Sidebar Container AdminLTE -->

                    <!-- Content Wrapper. Contains page content -->
                    <div class="content-wrapper">
                        <div class="content-header">

                        </div>

                        <section class="content">
                            <div class="container-fluid">
                                <div class="card card-dark">
                                    <div class="card-header">
                                        <div class="d-flex justify-content-center h-100">
                                            <h4 class="card-title">You are only one step a way from your new password,
                                                recover your
                                                password now.
                                            </h4>
                                        </div>
                                    </div>
                                    <!-- /.card-header -->
                                    <!-- form start -->
                                    
                                    <form action="/changepassword" method="post" id="ChangePasswordForm">
                                        <div class="card-body">
                                            <% if(errorMsg) { %>
                                                <% errorMsg.forEach((err) => { %>
                                                    <% if(err.path === "passwordUpdated") { %>
                                                        <div class="d-flex align-items-center justify-content-center h-100 mt-3">
                                                            <div class="w-50">
                                                                <div class="alert alert-success" id="toggle_close" role="alert">
                                                                    <%= err.msg %>
                                                                    <span class="fas fa-times float-right" id="alert_box"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    <% } %>
                                                <% }) %>  
                                            <% } %>
                                            <div class="d-flex align-items-center justify-content-center h-100">
                                                <div class="w-50">
                                                    <div class="input-group mt-2">
                                                        <input type="password" class="form-control"
                                                            placeholder="Password" name="password" id="password-input">
                                                        <div class="input-group-append">
                                                            <div class="input-group-text" id="toggle-password">
                                                                <span class="fas fa-eye" id="toggle-icon"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <% if(errorMsg && errorMsg.length> 0){ %>
                                                        <% errorMsg.forEach((err)=> { %>
                                                            <% if(err.path==="password" ){ %>
                                                                <span class="error-message">
                                                                    <%= err.msg %>
                                                                </span>
                                                                <% } %>
                                                                    <% }) %>
                                                                        <% } %>
                                                </div>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-center h-100">
                                                <div class="w-50">
                                                    <div class="input-group mt-2">
                                                        <input type="password" class="form-control"
                                                            placeholder="Confirm Password" name="confirmPassword"
                                                            id="confirmPassword-Input">
                                                        <div class="input-group-append">
                                                            <div class="input-group-text" id="toggle-confirmPassword">
                                                                <span class="fas fa-eye"
                                                                    id="toggle-confirmPasswordIcon"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <% if(errorMsg.length> 0) {%>
                                                        <% errorMsg.forEach((err)=> { %>
                                                            <% if(err.path==="confirmPassword" ) { %>
                                                                <span class="error-message">
                                                                    <%= err.msg %>
                                                                </span>
                                                                <% } %>
                                                                    <% }) %>
                                                                        <% } %>
                                                </div>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-center mt-3">
                                                <button type="submit" class="btn btn-dark">Change
                                                    Password
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </section>
                    </div>
                    <!--Footer-->
                    <%- include('./includes/footer.ejs') %>
                        <!-- /.Footer-->
        </div>

        <!-- jQuery -->
        <script src="/js/jquery.min.js"></script>

        <script src="/js/jquery-ui.min.js"></script>
        <script src="/js/password.js"></script>

        <script>
            $.widget.bridge('uibutton', $.ui.button)
        </script>

        <!-- Bootstrap 4 -->
        <script src="/js/bootstrap.bundle.min.js"></script>

        <!-- AdminLTE App -->
        <script src="/js/adminlte.js"></script>

        <!--close icon alert box-->
        <script src="/js/close.js"></script>

        <!--jQuery validation-->
        <%- include("../auth/includes/script.ejs") %>
    </body>